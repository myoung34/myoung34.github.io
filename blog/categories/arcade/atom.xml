<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="https://www.w3.org/2005/Atom">

  <title><![CDATA[Category: arcade | Marcus Young]]></title>
  <link href="https://marcyoung.us/blog/categories/arcade/atom.xml" rel="self"/>
  <link href="https://marcyoung.us/"/>
  <updated>2022-02-16T01:33:11+00:00</updated>
  <id>https://marcyoung.us/</id>
  <author>
    <name><![CDATA[Marcus Young]]></name>
    
  </author>
  <generator uri="https://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Making my own plaato keg firmware]]></title>
    <link href="https://marcyoung.us/post/arcade_rebuilds"/>
    <updated>2022-02-15T00:00:00+00:00</updated>
    <id>https://marcyoung.us/post/plaato-keg</id>
    <content type="html"><![CDATA[<p>After two years of failing to deliver a promised feature I decided to reverse engineer and make my own plaato keg firmware <!-- more --></p>

<p><br/>
<br/>
I backed this project because plaato makes really good quality stuff. The idea of having a weight based keg estimator for my barcaderator was key.
They promised multiple times they&rsquo;d allow people to capture the data themselves. They have yet to deliver.
<br/>
<br/></p>

<p><img src="/images/keg/keg6.png">
<br/>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Andreas (PLAATO)&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Aug 12, 2020, 3:14 PM GMT+2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Hi! We&rsquo;ve unfortunately had to put the webhook for PLAATO Keg
</span><span class='line'>on the back burner as we are working on other projects,
</span><span class='line'>particularly with our backend, that take priority at the moment.
</span><span class='line'>While we would very much like to implement the webhook we
</span><span class='line'>unfortunately don&rsquo;t have any ETA on this as of now.
</span><span class='line'>&lt;code&gt;
</span><span class='line'>&lt;br/&gt;
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>Abi from Plaato&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Feb 11, 2022 2:21 AM GMT+2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Hey Marcus,&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Thank you for sharing. What I will do to make sure your voice is
</span><span class='line'>heard is to share your message as a Feature Request to the development
</span><span class='line'>team.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;I hope this helps, please let me know if you have any additional
</span><span class='line'>questions.</span></code></pre></td></tr></table></div></figure></p>

<p>So I decided: why not do it myself?</p>

<p>In january 2020 I did a <a href="https://marcyoung.us/post/homebrew-hacking/">PyTN talk about how to sniff the data.</a> While cool, it didn&rsquo;t really bear much fruit. The amount of effort to make this be my end game was a bit much and I&rsquo;d be reliant on always intercepting it. I did however know that its got an ESP32-D0W0 (wroom) as the brains and it didnt look that complicated.</p>

<p>So I took it down again and flashed a basic esphome build to it (the code is <a href="https://github.com/myoung34/plaato-keg-esphome">here.</a></p>

<p><br/>
<img src="/images/keg/keg.jpg">
<br/></p>

<p>This was easier than it looks, you just need a steady hand. Once you flash it the first time you can do pure OTA updates.</p>

<p>I wont go into absolute detail but you can just look at the pinout for the ESP32 and solder leads to the pins directly. RX, TX, Gnd, Vcc, and GPIO (grounded) directly to an FTDI programmer.</p>

<p>First I made a backup of the original firmware:</p>

<pre><code>esptool.py --port /dev/tty.usbserial-00000000 write_flash \
  --flash_mode dio --flash_freq 40m --flash_size detect \
  0 plaato_backup.bin
</code></pre>

<p>Then I flashed the new one built from ESPhome:</p>

<pre><code>esptool.py --port /dev/tty.usbserial-00000000 write_flash \
  --flash_mode dio --flash_freq 40m --flash_size detect 0 \
  plaato.bin
</code></pre>

<p>Now it shows up in ESPHome as expected!</p>

<p>I then used a (very old) osciloscope to try to map out the load cells (load cell combinator is pretty boring (yayyy) and just drags the voltage, ground, data, etc over a ribbon cable to the main PCB. This main PCB uses a <code>P##</code> notation which are not 1:1 with the ESP32 (booooo)</p>

<p><br/>
<img src="/images/keg/keg1.jpg">
<br/></p>

<p>I was able to discover that the clock for this is P14. I then used a multimeter to correlate P14 to GPIO16 (by dragging the other load across all the ESP32 pins until a beep gave it away). I did this to discover the data pin from the load cell combinator is P28. My handy dandy Multimeter let me correlate P28 to GPIO 17 on the ESP32.</p>

<p><br/>
<img src="/images/keg/keg2.jpg">
<br/>
<br/>
<img src="/images/keg/keg3.jpg">
<br/></p>

<p>I was able to figure out the LEDs without an oscilloscope by just using a multimeter. The main PCB just uses GPIO to turn those pins high or low to run the 3 LEDs, which is boring (yay).</p>

<p>The only thing I have yet to figure out is the water sensor (It looks like it&rsquo;s using a TVS diode to protect the thing from whatever its doing to detect water (voltage shorting?)) and whatever it&rsquo;s using to allow resets (a magnet above the MV3581?)</p>

<p>Check out the <a href="https://github.com/myoung34/plaato-keg-esphome">repo for my up to date esphome yaml</a></p>

<p><br/>
<img src="/images/keg/keg7.png">
<br/></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Some Arcade rebuilds]]></title>
    <link href="https://marcyoung.us/post/arcade_rebuilds"/>
    <updated>2022-01-28T00:00:00+00:00</updated>
    <id>https://marcyoung.us/post/arcades</id>
    <content type="html"><![CDATA[<p>I spent a good chunk of 2021 rebuilding arcades for people <!-- more --></p>

<p><br/>
<br/>
If you&rsquo;re going to send me hate letters for pandoras box: go ahead and hit the back button. I made these for people who dont want a bunch of arcades, so every single one of these was pandoras box.
<br/>
<br/>
I&rsquo;ll share some before and afters:</p>

<p><br/>
<br/>
<br/>
An atari centipede (already JAMMA) in mostly good condition. <br/>
* Turned into Pandoras box<br/>
* The CRT was bad, they wanted it LCD<br/>
* They wanted to just turn the marquee blank<br/>
* The 6 button wiring harness was a joke<br/>
* I wanted to keep the steel control board so I welded back all the button holes and redrilled and added some nice polylaminate artwork over it<br/>
<img src="/images/arcade/Centipede.jpg"></p>

<p><br/>
<br/>
A knock off galaga<br/>
* Turned into Pandoras box<br/>
* The control panel was hacked together on &frac34;&#8221; MDF<br/>
* A real fire hazard internally<br/>
* CRT was bad, but the glass was good. The &ldquo;marquee&rdquo; was just paint on the backside: easily removed with acetone<br/>
* Wood was mostly saveable minus the water soaked edges/corners. Fixed with lots of sanding and bondo.<br/>
<img src="/images/arcade/galaga.jpg"><br/>
<img src="/images/arcade/galaga1.jpg"></p>

<p><br/>
<br/>
A Stern Berzerk in absolute terrible condition<br/>
* Turned into Pandoras box<br/>
* This took 90% of the time just to sand.<br/>
* All the wood is pressed wood that had started to come apart at the bottom. Had to cut it all off and fix with bondo<br/>
* Custom cut a new control panel from &frac34;&#8221; MDF<br/>
* The CRT was bad, replaced with a monitor inlaid into a new &frac34;&#8221; MDF with a router for the bezel cover<br/>
<img src="/images/arcade/stern.jpg"></p>

<p><br/>
<br/>
Knock off WWE Wrestlefest turned Survival Arts<br/>
* Rewired to CHAMMA, added pandoras box<br/>
* CRT was still in great shape, no glass and didnt have the ability to cut plexi. Sold at a yard sale<br/>
* CPO was hacked together with plexi over it. Cut all new &frac34;&#8221; for the 6 buttons, kept the hardware + plexi<br/>
* Repainted, 3d printed a &ldquo;MAME&rdquo; marquee and glued to a new marquee<br/>
<img src="/images/arcade/survival_arts.jpg"></p>

<p><br/>
<br/>
Zaxxon hacked into a poker game<br/>
* Disgusting estate sale find. <br/>
* Contained dead rat<br/>
* CRT was saveable with some magnet work<br/>
* Recut new CPO from &frac34;&#8221; MDF and wired to CHAMMA with pandoras box<br/>
* Kept all artwork and 90s style fake wood laminate<br/>
* 3d printed a cover for the front hole (not pictured)<br/>
<img src="/images/arcade/zaxxon.jpg"></p>

<p><br/>
<br/>
Completely empty MK2 shell<br/>
* Stole CPO from another similar Midway shell<br/>
* Customer wanted light up LEDs which required hacking up all the button PCBs to separate the ground and voltage and wiring them to the +5V on the CHAMMA harness<br/>
* New LCD built into shell from a 32&#8221; TV<br/>
<img src="/images/arcade/mk2.jpg"></p>

<p><br/>
<br/>
Gem fighter<br/>
* A dynamo cabinet turned into gem fighter<br/>
* They wanted mrs pacman marquee and a generic multi-game CPO - a nice polylaminate one with zelda, donkey kong, pacman etc<br/>
* Wood was originally in great shape, CRT was bad. Said fixable but needed a complete overhaul. Used an LCD to replace.<br/>
* Paint touch up, replacement locks<br/>
<img src="/images/arcade/gem_fighter.jpg"></p>

<p><br/>
<br/>
Custom 4 Player from MK1 cabinet<br/>
* MK1 cabinet modified to fit a 4 player CPO<br/>
* Built dimensions to fit, using custom latching system to remove (does not fit through a standard door as-is)<br/>
* 2 Players are to CHAMMA harness as usual, the other 2 players are USB into pandoras box. Worked surprisingly easy<br/>
* Wanted it galaga themed, so galaga marquee and side artwork ordered to fit<br/>
* Original 25&#8221; CRT still worked great, added plexi<br/>
<img src="/images/arcade/mk1_1.jpg"><br/>
<img src="/images/arcade/mk1_2.jpg"><br/>
<img src="/images/arcade/mk1_3.jpg"><br/>
<img src="/images/arcade/mk1_4.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Barcaderator - Building An Arcade Kegerator]]></title>
    <link href="https://marcyoung.us/post/barcade"/>
    <updated>2019-11-20T00:00:00+00:00</updated>
    <id>https://marcyoung.us/post/Barcaderator</id>
    <content type="html"><![CDATA[<p>Introducing a modular arcade kegerator  <!-- more --></p>

<h3>The Backstory</h3>

<p>I recenly got into doing random stuff with arcades.
In October 2018 I got ahold of a completely ripped apart San Fransisco Rush cabinet.
I redid some of the wood, built a computer into it, reversed all the controls into a teensy and made it play Rocket League.
My tattoo shop is currently painting it (build log to come when I have it back).</p>

<p>In trade, I&rsquo;m fixing their arcade machine.</p>

<p>So now apparently I like real arcade machines <a href="https://marcyoung.us/post/mame-cabinet/">and not my now-broken table top</a>.</p>

<p>I also brew beer. Why not combine the two?!</p>

<p>So I introduce to you:</p>

<p><img src="/images/barcade1.jpg">
<img src="/images/barcade2.jpg">
<img src="/images/barcade3.jpg">
<img src="/images/barcade2.gif">
<img src="/images/marquee.gif"></p>

<h3>The Hardware</h3>

<ul>
<li>The Marquee is a custom &ldquo;vintage style neon light&rdquo; from a company on alibaba.</li>
<li>The Computer is a <a href="https://www.dfrobot.com/product-1727.html?search=lattepanda%20alpha&amp;description=true">lattepanda alpha</a></li>
<li>The LED Buttons are <a href="https://groovygamegear.com/webstore/index.php?main_page=product_info&amp;products_id=408">spectra eclipse</a></li>
<li>The LED controller is an <a href="https://www.arcaderenovations.com/ultimarc-pacled64.html">Ultimarc pacled64</a></li>
<li>The Cabinet was custom cut on a CNC</li>
<li>The &ldquo;split&rdquo; frame is based on <a href="https://cdn11.bigcommerce.com/s-ecrovlce13/images/stencil/500x659/products/10801/13177/pygcjgwqewky6od7qomr__54105.1563214651.png?c=2">this style of aluminum tongue/receiver</a> from TCH hardware</li>
<li>The &ldquo;latches&rdquo; and the handles for the split top are from TCH Hardware</li>
</ul>


<h3>The Software</h3>

<p>The lattepanda runs Ubuntu with MAME. I originally chose windows, but LEDBlinky is <em>awful</em>. Just awful.
So instead I&rsquo;ve been working with <a href="https://sourceforge.net/p/ledspicer/wiki/Home/">LEDSpicer by Patricio Rossi</a>. The software worked nearly out of the box and he&rsquo;s been super helpful for getting me up and running.</p>

<h3>Build Pics</h3>

<p><img src="/images/barcade/build2.jpg">
<img src="/images/barcade/build3.jpg">
<img src="/images/barcade/build4.jpg">
<img src="/images/barcade/build5.jpg">
<img src="/images/barcade/build6.jpg">
<img src="/images/barcade/build7.jpg">
<img src="/images/barcade/build8.jpg">
<img src="/images/barcade/build9.jpg">
<img src="/images/barcade/build10.jpg">
<img src="/images/barcade/build11.jpg">
<img src="/images/barcade/build12.jpg">
<img src="/images/barcade/build13.jpg">
<img src="/images/barcade/build14.jpg">
<img src="/images/barcade/build15.jpg"></p>
]]></content>
  </entry>
  
</feed>
